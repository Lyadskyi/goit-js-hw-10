{"version":3,"file":"commonHelpers.js","sources":["../src/js/01-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst datatimePicker = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('[data-start]');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\n\nlet userInputDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose([selectedDates]) {\n    if (selectedDates < options.defaultDate) {\n      btnStart.disabled = true;\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        backgroundColor: 'rgb(100, 149, 237)',\n        position: 'center',\n        messageColor: '#FFD700',\n      });\n    } else {\n      btnStart.disabled = false;\n      userInputDate = selectedDates.getTime();\n    }\n  },\n};\n\nflatpickr(datatimePicker, options);\n\nbtnStart.addEventListener('click', handlerBtnStart);\n\nfunction handlerBtnStart() {\n  if (userInputDate > Date.now()) {\n    const timerCalc = () => {\n      updateData(\n        [dataDays, dataHours, dataMinutes, dataSeconds],\n        convertMs(userInputDate - Date.now())\n      );\n      if (\n        userInputDate - 1000 < Date.now() &&\n        dataSeconds.textContent === '00'\n      )\n        clearInterval(interval);\n    };\n    timerCalc();\n    const interval = setInterval(timerCalc, 1000);\n    btnStart.disabled = true;\n    datatimePicker.disabled = true;\n    btnStart.dataset.start = 'started';\n  } else {\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      backgroundColor: 'rgb(236, 56, 56)',\n      messageColor: '#FFF',\n      position: 'topCenter',\n    });\n    btnStart.disabled = true;\n  }\n};\n\nconst addLeadingZero = (output, time) => {\n  output.textContent = time.toString().padStart(2, '0');\n};\nconst updateData = (\n  [daysData, hoursData, minutesData, secondsData],\n  { days, hours, minutes, seconds }\n) => {\n  addLeadingZero(daysData, days);\n  addLeadingZero(hoursData, hours);\n  addLeadingZero(minutesData, minutes);\n  addLeadingZero(secondsData, seconds);\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n// console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n// console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["datatimePicker","btnStart","dataDays","dataHours","dataMinutes","dataSeconds","userInputDate","options","selectedDates","iziToast","flatpickr","handlerBtnStart","timerCalc","updateData","convertMs","interval","addLeadingZero","output","time","daysData","hoursData","minutesData","secondsData","days","hours","minutes","seconds","ms"],"mappings":"2FASA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQ,CAACC,CAAa,EAAG,CACnBA,EAAgBD,EAAQ,aAC1BN,EAAS,SAAW,GACpBQ,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,qBACjB,SAAU,SACV,aAAc,SACtB,CAAO,IAEDR,EAAS,SAAW,GACpBK,EAAgBE,EAAc,UAEjC,CACH,EAEAE,EAAUV,EAAgBO,CAAO,EAEjCN,EAAS,iBAAiB,QAASU,CAAe,EAElD,SAASA,GAAkB,CACzB,GAAIL,EAAgB,KAAK,MAAO,CAC9B,MAAMM,EAAY,IAAM,CACtBC,EACE,CAACX,EAAUC,EAAWC,EAAaC,CAAW,EAC9CS,EAAUR,EAAgB,KAAK,KAAK,CAC5C,EAEQA,EAAgB,IAAO,KAAK,IAAK,GACjCD,EAAY,cAAgB,MAE5B,cAAcU,CAAQ,CAC9B,EACIH,IACA,MAAMG,EAAW,YAAYH,EAAW,GAAI,EAC5CX,EAAS,SAAW,GACpBD,EAAe,SAAW,GAC1BC,EAAS,QAAQ,MAAQ,SAC7B,MACIQ,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,mBACjB,aAAc,OACd,SAAU,WAChB,CAAK,EACDR,EAAS,SAAW,EAExB,CAEA,MAAMe,EAAiB,CAACC,EAAQC,IAAS,CACvCD,EAAO,YAAcC,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,CACtD,EACML,EAAa,CACjB,CAACM,EAAUC,EAAWC,EAAaC,CAAW,EAC9C,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,IAC9B,CACHV,EAAeG,EAAUI,CAAI,EAC7BP,EAAeI,EAAWI,CAAK,EAC/BR,EAAeK,EAAaI,CAAO,EACnCT,EAAeM,EAAaI,CAAO,CACrC,EAEA,SAASZ,EAAUa,EAAI,CAQrB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}